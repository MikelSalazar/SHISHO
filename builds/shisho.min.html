<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>SHISHO SHISHO Template</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<style> html, body { width:100%; height:100%; margin:0; } </style>
		<script>
// SHISHO

class SHISHO{constructor(e={}){this._viewports=[];let t=this._instanceNumber=SHISHO.instances.length;let i=this._instanceString="ShishoApp"+(t>0?t:"");SHISHO.instances.push(this);this._data=new Root({name:"unnamed_ontology"});this.viewports.push(new Viewport(this,e));if(e.data){if(typeof e.dataElement==="string"){this._dataElement=document.getElementById(e.dataElement);if(!this._dataElement)throw new Error("Invalid data element")}else this._dataElement=e.dataElement}else this._dataElement=document.getElementById(i+"Data");this.deserialize(e.data);console.log(SHISHO.AppName+" "+SHISHO.AppVersion+" Initialized")}static get AppName(){return"SHISHO"}static get AppVersion(){return"0.4.1"}static get _instanceNumber(){return this._instanceNumber}get viewports(){return this._viewports}get data(){return this._data}static init(e){return new SHISHO(e)}deserialize(e){if(!e){if(this._dataElement)e=this._dataElement.textContent}try{if(typeof e=="string"){let t=e.indexOf("{"),i=e.lastIndexOf("}");if(t<0||i<0)throw new Error("Invalid JSON data");let s=e.slice(t,i+1);e=JSON.parse(s)}this._data.deserialize(e)}catch(e){Dialog.create("Error",this._viewports[0].layers.dialog,"Error","Unable to load data.<br>"+e.message);return false}}serialize(){let e="";if(this._saveToElement){if(!this._dataElement){this._dataElement=document.createElement("script");this._dataElement.id=this._instanceString+"Data";document.body.append(this._dataElement)}this._dataElement.textContent="\nlet "+this._instanceString+"Data = "+e+";\n"}return e}}SHISHO.instances=[];SHISHO.resources={};class JsonSchemaExporter{static export(e){let t={$id:"https://example.com/example.schema.json",$schema:"http://json-schema.org/draft-07/schema#",properties:{}};for(let i in e.classes){let s=e.classes[i];let n=t.properties[s.name]={};n.type="object";n.description=s.description}let i=JSON.stringify(t,null,"  ");let s=new Blob([i],{type:"text/plain;charset=utf-8"});let n=window.URL.createObjectURL(s);let r=document.createElement("a");document.body.appendChild(r);r.style.display="none";r.href=n;r.download="schema.json";r.click();setTimeout((function(){document.body.removeChild(r);window.URL.revokeObjectURL(n)}),0);return i}}class OwlExporter{static export(e){let t="";for(let t in e.classes){let i=e.classes[t]}return t}}class SqlExporter{static export(e){let t="";for(let t in e.classes){let i=e.classes[t]}return t}}class OwlImporter{constructor(e,t,i=true){let s=new DOMParser;let n=s.parseFromString(t,"text/xml");let r=null;for(let e of n.getRootNode().children)if(e.nodeName=="rdf:RDF")r=e;if(!r)throw new Error("Invalid OWL File. ");if(i)e.deserialize();for(let t of r.children){switch(t.nodeName){case"owl:Ontology":let i,s=this.getName(t);break;case"owl:Class":let n,r=this.getName(t);if(r)n=new Class({name:r});else throw Error("Class name not defined");let l=this.findElement("entityPositionX",t);let o=this.findElement("entityPositionY",t);n.positions=[new Vector({x:l?parseFloat(l.textContent):0,y:o?parseFloat(o.textContent):0})];console.log("Created Class: "+n.name+": "+JSON.stringify(n.positions));e.classes[r]=n;break;case"owl:ObjectProperty":let a,h=null;for(let e of t.attributes){if(e.name.toLowerCase()=="rdf:id")h=e.textContent;if(e.name.toLowerCase()=="rdf:about")h=e.textContent.split("#")[1]}let c=this.findElement("domain",t);let d=this.findElement("range",t);let u=this.extractName(c.attributes[0]);let p=this.extractName(d.attributes[0]);a=new Relation({name:h,origin:u,target:p});e.relations[h]=a;console.log("Relation:"+h);break}}Object.keys(e.relations).forEach((t=>{let i=e.relations[t];if(!e.classes[i.origin])throw Error("Class not defined: '"+i.origin+"' in relation '"+t+"'");if(!e.classes[i.target])throw Error("Class not defined: '"+i.target+"' in relation '"+t+"'")}))}getName(e){let t,i=null;for(let i of e.attributes){switch(i.name.toLowerCase()){case"rdf:id":return i.textContent;case"rdf:about":t=this.extractName(i);break}}return t}extractName(e){return e.textContent.split("#")[1]}findElement(e,t){let i=[t];while(i.length>0){let t=i.pop();if(t.nodeName.includes(e))return t;i.push(...t.children)}return null}}class Node{constructor(e={}){this.deserialize(e)}serialize(){return null}deserialize(e){}}class Class extends Node{constructor(e={}){super(e);this.properties={};this.positions=[]}deserialize(e){if(!e.name)throw Error("Class without name");this.name=e.name;this.description=e.description||"";this.properties={};if(e.properties)e.properties.forEach((e=>{if(!e.name)throw Error("Property without name");this.properties[e.name]=new Property(e)}));this.positions=[];if(e.positions)e.positions.forEach((e=>{this.positions.push(new Vector(e))}))}}class Color extends Node{constructor(e={}){super(e)}deserialize(e){this.set(e.r,e.g,e.b)}set(e=0,t=0,i=0){this.r=e;this.g=t;this.b=i}}class Ontology extends Node{constructor(e={}){super(e);this.classes={};this.relations={}}deserialize(e={}){this.name=e.name;this.description=e.description||"";this.classes={};if(e.classes)e.classes.forEach((e=>{if(!e.name)throw Error("Class without name");this.classes[e.name]=new Class(e)}));this.relations={};if(e.relations)e.relations.forEach((e=>{if(!e.name)throw Error("Relation without name");this.relations[e.name]=new Relation(e)}))}}class Property extends Node{constructor(e={}){super(e)}deserialize(e){if(!e.name)throw Error("Property without name");this.name=e.name;this.description=e.description}}class Relation extends Node{constructor(e={}){super(e)}deserialize(e){if(!e.name)throw Error("Relation without name");this.name=e.name;this.description=e.description;this.origin=e.origin;this.target=e.target}}class Root extends Node{constructor(e={}){super(e);this.styles={}}deserialize(e={}){this.name=e.name;this.description=e.description;this.author=e.author;this.ontology=new Ontology(e.ontology)}}class Style extends Node{constructor(e={}){super(e)}get name(){return this._name}get parent(){return this._parent}get shape(){return this.parsePropertyValue("_shape")}set shape(e){this._shape=e}get width(){return this.parsePropertyValue("_width")}set width(e){this._width=e}get height(){return this.parsePropertyValue("_height")}set height(e){this._height=e}get radius(){return this.parsePropertyValue("_radius")}set radius(e){this._radius=e}get radius2(){return this.parsePropertyValue("_radius2")}set radius2(e){this._radius2=e}get color(){return this.parsePropertyValue("_color")}set color(e){this._color=e}get borderColor(){return this.parsePropertyValue("_borderColor")}set borderColor(e){this._borderColor=e}get borderWidth(){return this.parsePropertyValue("_borderWidth")}set borderWidth(e){this._borderWidth=e}get textFont(){return this.parsePropertyValue("_textFont")}set textFont(e){this._textFont=e}get textSize(){return this.parsePropertyValue("_textSize")}set textSize(e){this._textSize=e}get textAlign(){return this.parsePropertyValue("_textAlign")}set textAlign(e){this._textAlign=e}get textColor(){return this.parsePropertyValue("_textColor")}set textColor(e){this._textColor=e}get icon(){return this.parsePropertyValue("_icon")}set icon(e){this._icon=e}get iconColor(){return this.parsePropertyValue("_iconColor")}set iconColor(e){this._iconColor=e}get iconSize(){return this.parsePropertyValue("_iconSize")}set iconSize(e){this._iconSize=e}get iconOffsetX(){return this.parsePropertyValue("_iconOffsetX")}set iconOffsetX(e){this._iconOffsetX=e}get iconOffsetY(){return this.parsePropertyValue("_iconOffsetY")}set iconOffsetY(e){this._iconOffsetY=e}deserialize(e){this._name=e.name;this._parent=e.parent;this._children=[];if(this._parent)this._children.push(this.name);if(e.shape)this.shape=e.shape;if(e.width)this.width=e.width;if(e.height)this.height=e.height;if(e.radius)this.radius=e.radius;if(e.radius2)this.radius2=e.radius2;if(e.color)this.color=e.color;if(e.borderColor)this.borderColor=e.borderColor;if(e.borderWidth)this.borderWidth=e.borderWidth;if(e.textFont)this.textFont=e.textFont;if(e.textSize)this.textSize=e.textSize;if(e.textAlign)this.textAlign=e.textAlign;if(e.textColor)this.textColor=e.textColor;if(e.icon)this.icon=e.icon;if(e.iconColor)this.iconColor=e.iconColor;if(e.iconSize)this.iconSize=e.iconSize;if(e.iconOffsetX)this.iconOffsetX=e.iconOffsetX;if(e.iconOffsetY)this.iconOffsetY=e.iconOffsetY}parsePropertyValue(e){let t=this[e],i=this._parent;return t}static combine(e){if(!e||e.length==0)throw Error("No styles to combine");if(e.length==1)return e[0];let t=e[0];e.forEach((e=>{t.deserialize(e)}));return t}}class Vector extends Node{constructor(e={}){super(e)}deserialize(e){this.set(e.x,e.y)}set(e=0,t=0){this.x=e;this.y=t}}class Element{constructor(e,t,i=null,s=null,n=null){this._visibility=1;this._name=e;this._position=t||new Vector;this._styles=i||[];this._text=s;this._icon=n}get name(){return this._name}get position(){return this._position}get styles(){return this._styles}get text(){return this._text}get icon(){return this._icon}get visibility(){return this._visibility}draw(e){e.save();let t=Style.combine(this._styles);let i=this._position;e.beginPath();switch(t.shape){case"circle":if(t.radius==undefined)throw Error("No radius defined");let s=parseFloat(t.radius);e.arc(i.x,i.y,s,0,2*Math.PI);break;case"rectangle":break}if(t.color){e.fillStyle=t.color;e.fill()}if(t.borderColor&&t.borderWidth){e.lineWidth=parseFloat(t.borderWidth);e.strokeStyle=t.borderColor;e.stroke()}if(this._text&&t.textColor&&t.textFont){e.textAlign="center";e.textBaseline="middle";e.fillStyle=t.textColor;e.font=t.textSize+" "+t.textFont;e.fillText(this._text,i.x,i.y)}if(this._icon){if(t.iconColor)e.fillStyle=t.iconColor;if(t.iconOffsetX)e.translate(parseFloat(t.iconOffsetX),0);if(t.iconOffsetY)e.translate(0,parseFloat(t.iconOffsetY));if(SHISHO.resources[this._icon]){SHISHO.resources[this._icon].draw(e,i,parseFloat(t.iconSize))}else throw Error("Unknow Icon: "+this._icon)}e.restore()}isInside(e){return false}}class Widget{constructor(e,t,i){this._children=[];this._visibility=1;this._removeIfHidden=false;this._name=e;this._parent=t;this._element=i;if(t){this.parent.children.push(this);if(i&&t.element&&i.parentElement!=t.element){t.element.appendChild(i)}}}get name(){return this._name}get element(){return this._element}get parent(){return this._parent}set parent(e){this._parent=e;let t=this.element;if(t&&t.parentElement)t.parentElement.removeChild(t);if(t&&this._parent.element)this._parent.element.appendChild(t)}get children(){return this._children}get visibility(){return this._visibility}update(e){let t=this._element,i=this._parent;if(this._removeIfHidden&&this._visibility<=0){if(t&&this._element.parentElement)t.parentElement.removeChild(t);if(this._parent){const e=i.children.indexOf(this);if(e>=0)i._children.splice(e,1)}return}if(t&&this._visibility!=1){t.style.opacity=""+this._visibility}if(this._visibility<=0)return;for(const t of this._children)t.update(e)}show(){this._visibility=1}hide(){this._visibility=0;console.log("Hiding "+this.name)}handleEvent(e){let t=0,i=this._children.length;for(t=i-1;t>=0;t--)if(this._children[t].handleEvent(e))return true;return false}}class Layer extends Widget{constructor(e,t,i){super(e,null,createElement(i,t.element,t.element.id+e,null,"ShishoLayer"));this._name=e;this._viewport=t}get viewport(){return this._viewport}}class DialogLayer extends Layer{constructor(e){super("Dialog",e,"div")}}class MainLayer extends Layer{constructor(e){super("Main",e,"div");this._graph=new Graph("Graph",this)}get name(){return this._name}}class MenuLayer extends Layer{constructor(e){super("Menu",e,"canvas");this._elements=[];this._canvas=this._element;this._context=this._canvas.getContext("2d");let t=new Style({name:"test",shape:"circle",color:"blue",radius:"128",iconColor:"white",iconSize:"160"});this._elements.push(new Element("a",new Vector({x:0,y:0}),[t,new Style({iconOffsetX:"32",iconOffsetY:"32"})],null,"App"));this._elements.push(new Element("b",new Vector({x:0,y:0}),[t,new Style({iconOffsetX:"-32",iconOffsetY:"32"})],null,"Options"));this._elements.push(new Element("c",new Vector({x:0,y:0}),[t,new Style({iconOffsetX:"32",iconOffsetY:"-32"})],null,"Test"));this._elements.push(new Element("d",new Vector({x:0,y:0}),[t]))}get canvas(){return this._canvas}get elements(){return this._elements}update(e){super.update(e);let t=this._canvas,i=this._context;let s=t.width=this._viewport.width,n=t.height=this._viewport.height;i.clearRect(0,0,s,n);this._elements[0].position.set(64,64);this._elements[1].position.set(s-64,64);this._elements[2].position.set(64,n-64);this._elements[3].position.set(s-64,n-64);let r,l=this._elements.length;for(r=0;r<l;r++){this._elements[r].draw(i)}}}class Shape{constructor(e={}){this._width=e.width||0;this._height=e.height||0;this._path=new Path2D(e.path);this._color=e.color;this._borderColor=e.borderColor;this._borderWidth=e.borderWidth;this._children=[];if(e.children)e.children.forEach((e=>{this._children.push(e)}))}get width(){return this._width}get height(){return this._height}get path(){return this._path}get color(){return this._color}get borderColor(){return this._borderColor}get borderWidth(){return this._borderWidth}draw(e,t=null,i=null){e.save();if(i){let s=this._width>this._height?this._width:this._height,n=i/s;if(this._width&&this._height)e.translate(-this.width*n/2,-this._height*n/2);e.scale(n,n);if(t)e.translate(t.x/n,t.y/n)}else if(t)e.translate(t.x,t.y);if(this._path){e.fillStyle=this._color;e.fill(this._path);if(this._borderColor&&this._borderWidth){e.lineWidth=parseFloat(this._borderWidth);e.strokeStyle=this._borderColor;e.stroke()}}this._children.forEach((t=>{t.draw(e)}));e.restore()}}class Viewport{constructor(e,t={}){this._layers={};this._app=e;this._parentElement=t.parentElement||document.body;let i=SHISHO.instances.length;if(i==1){createCssRule(".ShishoViewport","position: relative;"+"width: 100%; height: 100%; margin:0; overflow: hidden;");createCssRule(".ShishoLayer","position: absolute;"+"width: 100%; height: 100%; margin:0; overflow: hidden;");createCssRule(".ShishoBackground","position: absolute;"+"width: 100%; height: 100%; margin:0; overflow: hidden;"+"background: #00000080; ");createCssRule(".ShishoWindow","position: relative;"+"top: 50%; left: 50%; transform: translate(-50%,-50%); "+"box-sizing: border-box; background: white; color: black;"+"border: 2px solid blue; border-radius: 2vmin;"+"font-family: Arial, Helvetica, sans-serif; font-size: 2vmin;"+"width: max-content; height:max-content; box-sizing: border-box;");createCssRule(".ShishoWindowTitle","width:100%; box-sizing: border-box;"+"background: blue; color: white; border-radius: 2vmin;"+"font-size: 3vmin; text-align: center; padding: 1vmin;");createCssRule(".ShishoWindowContents","min-width:10vmin; min-height:10vmin; padding: 1vmin;"+"text-align: center;");createCssRule(".ShishoWindowContents label ","font-weight:bold");createCssRule(".ShishoWindowContents input, .ShishoWindowContents select","font-family: Arial, Helvetica, sans-serif; font-size: 2vmin;");createCssRule(".ShishoWindowButtonGroup","display:flex; justify-content: space-evenly;");createCssRule(".ShishoWindowButton","width:max-content; height:max-content; margin: 1vmin;"+"background: blue; color: white; border-radius: 2vmin;"+"font-size: 3vmin; text-align: center; padding: 1vmin;")}this._element=createElement("div",this._parentElement,"ShishoViewport"+i,null,"ShishoViewport");let s=this._layers.main=new MainLayer(this);let n=this._layers.menu=new MenuLayer(this);let r=this.layers.dialog=new DialogLayer(this);document.addEventListener("keyup",(e=>{if(e.ctrlKey&&e.code=="KeyI"){if(this.layers.dialog.children.length==0)Dialog.create("Import",this.layers.dialog)}if(e.ctrlKey&&e.code=="KeyE"){if(this.layers.dialog.children.length==0)Dialog.create("Export",this.layers.dialog)}e.preventDefault()}));function l(e){if(this._layers.dialog.handleEvent(e))return;if(this._layers.menu.handleEvent(e))return;if(this._layers.main.handleEvent(e))return}document.addEventListener("pointerdown",l.bind(this));document.addEventListener("pointermove",l.bind(this));document.addEventListener("pointerup",l.bind(this));document.addEventListener("touchdown",l.bind(this));document.addEventListener("touchmove",l.bind(this));document.addEventListener("touchup",l.bind(this));this.update(0)}get app(){return this._app}get layers(){return this._layers}get parentElement(){return this._parentElement}get element(){return this._element}get deltaTime(){return this._deltaTime}get width(){return this._element.clientWidth}get height(){return this._element.clientHeight}update(e=0){let t=e>0?e/1e3:.001;this._deltaTime=t-this._lastTime;this._lastTime=t;if(this._deltaTime>.1)this._deltaTime=.1;for(const e in this._layers){this._layers[e].update(this._deltaTime)}requestAnimationFrame(this.update.bind(this))}}function createElement(e,t,i=null,s=null,n=null,r=null,l=null){if(!e)throw Error("Tag required");let o=document.createElement(e);if(t)t.appendChild(o);if(i)o.id=i;if(s)o.id=s;if(n)o.className=n;if(r)o.style.cssText=r;if(l)o.innerText=l;return o}function createCssRule(e,t,i=false){if(document.styleSheets.length==0)document.head.append(document.createElement("style"));let s=document.styleSheets[0];let n=e+" {"+t+"}";let r=s.cssRules,l,o=r.length;for(l=0;l<o;l++){if(r[l].cssText.indexOf(e)==0&&r[l].cssText[e.length]==" "){if(i)r[l].cssText=n;return}}s.insertRule(e+" {"+t+"}",o)}class Background extends Widget{constructor(e,t){super(e,t,createElement("div",t.element,t.element+"Background",null,"ShishoBackground"));this._removeIfHidden=true}}class Button extends Widget{constructor(e,t,i,s=[]){super(e,t);this._text=i;this._callbacks=s;let n=t&&t.element?t.element:null;this._element=createElement("div",n,e,null,"ShishoWindowButton",null,this._text);this._element.addEventListener("click",(e=>{for(let e of this._callbacks)if(e(this)==false)return}))}get text(){return this._text}get callbacks(){return this._callbacks}}class Dialog extends Widget{constructor(e,t,i,s,n,r){super(e,t);this._removeIfHidden=true;this._title=i;this._contents=s;this._buttons=n;this._background=r;let l=t&&t.element?t.element:null;if(this.background)l=r.element;this._element=createElement("div",l,e,null,"ShishoWindow");this._titleGroup=new Widget("TitleGroup",this,createElement("div",this._element,e+i,null,"ShishoWindowTitle",null,this._title));this._contentsGroup=new Widget("ContentsGroup",this,createElement("div",this._element,e+i,null,"ShishoWindowContents"));for(let e of this._contents)e.parent=this._contentsGroup;this._buttonGroup=new Widget("ButtonGroup",this,createElement("div",this._element,e+"Buttons",null,"ShishoWindowButtonGroup"));for(let e of this._buttons){e.parent=this._buttonGroup;e.callbacks.push((()=>{this.hide();if(this._background)this._background.hide()}))}}get background(){return this._background}get title(){return this._title}get contents(){return this._contents}get buttons(){return this._buttons}update(e){super.update(e)}static create(e,t,i=null,s=null){switch(e){case"Import":return new Dialog("Import",t,"Import File...",[new FileInput("FileInput",null,"File: "),new Selector("FileType",null,"File Type: ",["OWL","JSON"])],[new Button("Cancel",null,"Cancel"),new Button("Import",null,"Import",[e=>{let i=e.parent.parent;let s=i.contents[0];let n=i.contents[1];console.log(s.filePath);try{if(s.filePath==null)throw Error("No file provided.");new OwlImporter(t.viewport.app.data.ontology,s.fileData)}catch(e){console.error(e);Dialog.create("Error",t,"Error","Unable to import File.<br>"+e.message);return false}}])],new Background("ImportBackground",t));case"Export":return new Dialog("Export",t,"Export File...",[new Selector("FileType",null,"File Type: ",["OWL","SCHEMA.JSON","SQL"])],[new Button("Cancel",null,"Cancel"),new Button("Export",null,"Export",[e=>{let i=e.parent.parent;let s=i.contents[0];let n=t.viewport.app.data.ontology;let r="";switch(s.selectedOption){case"OWL":r=OwlExporter.export(n);break;case"SCHEMA.JSON":r=JsonSchemaExporter.export(n);break;case"SQL":r=SqlExporter.export(n);break}console.log(r)}])],new Background("ImportBackground",t));case"Error":return new Dialog("Error",t,i,[new Text("ErrorMessage",null,s)],[new Button("OK",null,"OK")],new Background("ErrorBackground",t))}}}class FileInput extends Widget{constructor(e,t,i){super(e,t);this._label=i;let s=t&&t.element?t.element:null;this._element=createElement("p",s,e);this._labelElement=createElement("label",this._element,e+"Label",null,null,null,i);this._inputElement=createElement("input",this._element,e+"Input");this._inputElement.type="file";this._inputElement.onchange=e=>{let t=e.target.files[0];this._fileName=t.name;this._filePath=t.path;let i=new FileReader;i.readAsText(t,"UTF-8");i.onload=e=>{this._fileData=e.target.result.toString()}}}get fileName(){return this._fileName}get filePath(){return this._filePath}get fileData(){return this._fileData}}class Graph extends Widget{constructor(e,t){super(e,t,createElement("canvas",t.element,t.name+"Canvas"));this._elements=[];this._canvas=this._element;this._context=this._canvas.getContext("2d");this._translate=new Vector}update(e){super.update(e);let t=this._canvas,i=this._context;let s=t.width=this.parent.element.clientWidth,n=t.height=this.parent.element.clientHeight;i.clearRect(0,0,s,n);i.fillStyle="white";i.fillRect(0,0,s,n);i.translate(this._translate.x,this._translate.y);let r=this.parent.viewport.app.data.ontology;i.fillStyle="black";i.font="16px Arial";i.textAlign="center";i.textBaseline="middle";this._elements=[];for(let e in r.relations){let t=r.relations[e];let s=r.classes[t.origin].positions[0];let n=r.classes[t.target].positions[0];i.beginPath();i.moveTo(s.x,s.y);i.lineTo(n.x,n.y);i.stroke();i.textAlign="center";i.textBaseline="middle";i.fillStyle="black";i.font="Arial 12px";i.fillText(t.name,(s.x+n.x)/2,(s.y+n.y)/2)}let l=new Style({name:"simple",shape:"circle",radius:"50",color:"white",borderWidth:"2",borderColor:"black",textColor:"black",textFont:"Arial",textSize:"16px"});for(let e in r.classes){let t=r.classes[e];let s=new Element(t.name,t.positions[0],[l],t.name);this._elements.push(s);s.draw(i)}}handleEvent(e){switch(e.type){case"pointermove":let t=e;if(t.buttons==1){this._translate.x+=t.movementX;this._translate.y+=t.movementY}break;case"touchmove":let i=e;console.log("touchmove");break}return true}}class Label extends Widget{constructor(e,t,i){super(e,t,createElement("label",null));this.text=i}get text(){return this._text}set text(e){this._element.innerHTML=this._text=e}}class Selector extends Widget{constructor(e,t,i,s){super(e,t);this._label=i||"";this._options=s||[];let n=t&&t.element?t.element:null;this._element=createElement("p",n,e);this._labelElement=createElement("label",this._element,e+"Label",null,null,null,i);this._selectElement=createElement("select",this._element,e+"Label",null,null,null,i);let r=0,l=this._options.length;for(r=0;r<l;r++){let e=createElement("option",this._selectElement,null,null,null,null,this._options[r]);e.value=""+r}}get selectedOption(){return this._options[this.selectedIndex]}get selectedIndex(){return parseInt(this._selectElement.value)}}class Text extends Widget{constructor(e,t,i){super(e,t,createElement("p",null));this.text=i}get text(){return this._text}set text(e){this._element.innerHTML=this._text=e}}SHISHO.resources={App:new Shape({width:512,height:512,children:[new Shape({color:"#4facfe",path:"m 271.83223,123.93778 -88.90151,161.1114 7.69932,4.25201 88.9015,-161.1114 z m 17.22091,12.33414 -3.53519,8.05479 108.39002,47.62755 3.53519,-8.04697 z m 108.01308,57.60033 a 4.3966097,4.3966097 0 0 0 -0.13266,0.002 4.3966097,4.3966097 0 0 0 -4.08209,3.18949 l -19.97485,69.9208 a 4.3966097,4.3966097 0 0 0 3.01957,5.43366 4.3966097,4.3966097 0 0 0 5.43365,-3.01957 l 19.9827,-69.92275 a 4.3966097,4.3966097 0 0 0 -3.02741,-5.43171 4.3966097,4.3966097 0 0 0 -1.21876,-0.17189 z m -25.90071,90.50505 c -2.84772,0 -5.15632,2.41459 -5.15632,5.3946 0,2.98 2.3086,5.39654 5.15632,5.39654 2.8477,0 5.15631,-2.41654 5.15631,-5.39654 0,-2.98001 -2.30861,-5.3946 -5.15631,-5.3946 z m -192.09422,8.22666 a 4.3966097,4.3966097 0 0 0 -3.98833,2.58011 4.3966097,4.3966097 0 0 0 2.18558,5.82429 l 75.1865,34.15668 a 4.3966097,4.3966097 0 0 0 5.82428,-2.18557 4.3966097,4.3966097 0 0 0 -2.18557,-5.8243 l -75.1865,-34.15667 a 4.3966097,4.3966097 0 0 0 -1.66017,-0.39063 4.3966097,4.3966097 0 0 0 -0.17578,-0.004 z m 187.00431,12.66032 a 4.3966097,4.3966097 0 0 0 -0.13085,0.004 4.3966097,4.3966097 0 0 0 -4.08208,3.18168 l -16.80099,58.71948 -61.40312,-27.03548 a 4.3966097,4.3966097 0 0 0 -1.66213,-0.37698 4.3966097,4.3966097 0 0 0 -4.13286,2.627 4.3966097,4.3966097 0 0 0 2.25003,5.79499 l 62.50664,27.52381 -0.76368,2.66993 a 4.3966097,4.3966097 0 0 0 3.01957,5.4317 4.3966097,4.3966097 0 0 0 5.43366,-3.01954 l 0.43164,-1.50782 3.15629,1.39062 a 4.3966097,4.3966097 0 0 0 5.795,-2.25199 4.3966097,4.3966097 0 0 0 -2.25198,-5.79499 l -4.25787,-1.87501 17.13108,-59.87382 a 4.3966097,4.3966097 0 0 0 -3.01762,-5.44148 4.3966097,4.3966097 0 0 0 -1.22071,-0.166 z"}),new Shape({color:"#ffffff",path:"m 132.51993,103.88675 -6.04695,11.44154 -12.44548,1.26956 8.53138,9.57824 -2.72661,12.76774 11.33803,-5.50788 10.77163,6.6114 -1.51174,-12.96695 9.36731,-8.67394 -12.28337,-2.5137 z m 129.47234,0.14064 -4.29108,23.84405 -21.19168,9.8302 20.35378,11.63882 2.37503,24.1546 16.87326,-16.66818 22.67607,5.08601 -9.93373,-21.92216 11.63492,-20.99049 -23.00029,3.07816 z m 125.61289,51.67057 -4.29301,23.8714 -21.21903,9.8302 20.35573,11.63882 2.37502,24.1253 16.87328,-16.63888 22.67605,5.086 -9.90638,-21.92215 11.63493,-21.01979 -23.0003,3.10746 z m -282.70276,33.67425 -3.18559,17.79711 -15.818559,7.31649 15.172069,8.67199 1.75393,18.02366 12.58023,-12.42984 16.926,3.7852 -7.39658,-16.35567 8.66612,-15.65059 -17.14279,2.31643 z m 62.19999,64.46566 -4.64458,25.93392 -23.08038,10.67786 22.137,12.65641 2.58988,26.24448 18.33032,-18.10766 24.64873,5.56453 -10.77161,-23.8714 12.63297,-22.82646 -24.9964,3.39068 z m 167.64469,83.13971 -4.40045,24.43784 -21.73074,10.05677 20.84011,11.92199 2.42971,24.71907 17.27757,-17.06467 23.21708,5.22662 -10.15052,-22.45925 11.90445,-21.49833 -23.54131,3.1641 z"})]}),Options:new Shape({width:512,height:512,children:[new Shape({path:"m 272.067,511.99962 h -32.13325 c -25.98923,0 -47.13461,-21.14423 -47.13461,-47.13458 v -10.87108 c -11.0491,-3.53001 -21.78413,-7.98615 -32.09697,-13.32286 l -7.70421,7.70421 c -18.6592,18.68186 -48.54817,18.13421 -66.66349,-0.008 L 63.623228,425.65766 C 45.474265,407.52874 44.952311,377.65 63.629275,358.99422 l 7.698162,-7.69816 C 65.990352,340.98322 61.535411,330.2501 58.004567,319.19912 H 47.134616 C 21.146514,319.19965 0,298.05564 0,272.06832 v -32.13399 c 0,-25.98922 21.145002,-47.13458 47.134616,-47.13458 h 10.869951 c 3.530995,-11.04985 7.986163,-21.78411 13.32287,-32.09695 l -7.703832,-7.70307 c -18.666003,-18.64595 -18.15123,-48.52923 0.006,-66.663434 l 22.71318,-22.711982 c 18.159165,-18.184099 48.041705,-18.638021 66.663485,0.006 l 7.69703,7.697024 c 10.31285,-5.335948 21.04825,-9.79202 32.09697,-13.322861 V 47.134581 C 192.80022,21.145364 213.94414,0 239.93489,0 h 32.13325 c 25.98923,0 47.13461,21.143853 47.13461,47.134581 v 10.871077 c 11.04911,3.53001 21.78413,7.986157 32.09697,13.32286 l 7.70384,-7.703826 c 18.6592,-18.681863 48.54816,-18.134209 66.66348,0.0072 l 22.71125,22.710092 c 18.14896,18.128916 18.67091,48.007656 -0.008,66.663436 l -7.69817,7.69816 c 5.33709,10.31284 9.79203,21.04596 13.32287,32.09695 h 10.86996 c 25.98923,0 47.13461,21.14423 47.13461,47.13458 v 32.13398 c 0,25.98922 -21.145,47.13458 -47.13461,47.13458 h -10.86996 c -3.53099,11.04985 -7.98616,21.78411 -13.32287,32.09695 l 7.70421,7.70382 c 18.66601,18.64596 18.15086,48.52923 -0.008,66.66344 l -22.71313,22.71198 c -18.15916,18.1841 -48.0417,18.63802 -66.66349,-0.008 l -7.69702,-7.69702 c -10.31285,5.33595 -21.04825,9.79202 -32.09697,13.32286 v 10.8715 C 319.1986,490.85615 298.05435,512 272.06398,512 Z M 165.71837,409.16981 c 14.32709,8.47296 29.74723,14.87399 45.83068,19.02505 6.62401,1.70903 11.25206,7.68304 11.25206,14.524 v 22.14807 c 0,9.44695 7.6872,17.13301 17.13415,17.13301 h 32.13326 c 9.44695,0 17.13415,-7.68606 17.13415,-17.13301 v -22.14807 c 0,-6.84096 4.62805,-12.8149 11.25207,-14.524 16.0842,-4.15106 31.50395,-10.55209 45.83067,-19.02505 5.89495,-3.48601 13.39997,-2.53803 18.24307,2.30499 l 15.68811,15.68885 c 6.76386,6.77217 17.62587,6.61494 24.22419,0.008 l 22.72712,-22.72597 c 6.58206,-6.57412 6.80203,-17.43802 0.008,-24.22493 l -15.69491,-15.69489 c -4.84197,-4.84197 -5.78988,-12.34812 -2.30499,-18.24193 8.47297,-14.32595 14.87286,-29.74607 19.02392,-45.83064 1.71002,-6.62401 7.68418,-11.25092 14.52401,-11.25092 h 22.14696 c 9.44695,0 17.13416,-7.68606 17.13416,-17.13301 v -32.13398 c 0,-9.44695 -7.68683,-17.13301 -17.13416,-17.13301 h -22.14696 c -6.84096,0 -12.81414,-4.62805 -14.52401,-11.25092 -4.15106,-16.08495 -10.55209,-31.50507 -19.02392,-45.83065 -3.48504,-5.89418 -2.53702,-13.39996 2.30499,-18.24192 l 15.68886,-15.68885 c 6.782,-6.77406 6.60512,-17.63418 0.008,-24.22493 L 404.45174,84.839449 c -6.58698,-6.596045 -17.45088,-6.789179 -24.22495,-0.006 L 364.53264,100.5283 c -4.84196,4.84309 -12.35002,5.791 -18.24307,2.30499 -14.3271,-8.472966 -29.74723,-14.873986 -45.83068,-19.025049 -6.62402,-1.708993 -11.25206,-7.683039 -11.25206,-14.523998 V 47.134279 c 0,-9.446948 -7.6872,-17.13301 -17.13416,-17.13301 h -32.13325 c -9.44695,0 -17.13415,7.686062 -17.13415,17.13301 v 22.148075 c 0,6.840958 -4.62805,12.814891 -11.25207,14.523997 -16.0842,4.151063 -31.50396,10.552084 -45.83067,19.025049 -5.89608,3.48499 -13.40111,2.53701 -18.24308,-2.30499 l -15.6881,-15.688851 c -6.76386,-6.772171 -17.62701,-6.614942 -24.22419,-0.0072 L 84.840041,107.55634 c -6.582065,6.57413 -6.802034,17.43689 -0.006,24.22493 l 15.694909,15.6949 c 4.84197,4.84196 5.78988,12.34812 2.30499,18.24193 -8.47297,14.32595 -14.872861,29.74607 -19.023927,45.83064 -1.710014,6.62401 -7.684179,11.25092 -14.524008,11.25092 H 47.134843 c -9.446955,0.001 -17.134157,7.68719 -17.134157,17.13414 v 32.13399 c 0,9.44694 7.687202,17.13301 17.134157,17.13301 H 69.2818 c 6.840964,0 12.814145,4.62804 14.524008,11.25092 4.151067,16.08494 10.552092,31.50507 19.023922,45.83064 3.485,5.89418 2.53702,13.39996 -2.30499,18.24192 l -15.688857,15.68885 c -6.782002,6.77406 -6.60512,17.63418 -0.006,24.22493 l 22.725227,22.72483 c 6.58698,6.59605 17.45089,6.78918 24.22495,0.008 L 147.47421,411.476 c 3.568,-3.56702 10.9909,-6.59416 18.24421,-2.30401 z"}),new Shape({path:"m 256.00019,367.38705 c -61.42883,0 -111.40188,-49.97301 -111.40188,-111.40179 0,-61.42878 49.97305,-111.40179 111.40188,-111.40179 61.42883,0 111.40188,49.97301 111.40188,111.40179 0,61.42878 -49.97305,111.40179 -111.40188,111.40179 z m 0,-192.80164 c -44.88579,0 -81.39991,36.51598 -81.39991,81.39985 0,44.88387 36.51601,81.39985 81.39991,81.39985 44.8839,0 81.39991,-36.51598 81.39991,-81.39985 0,-44.88387 -36.51525,-81.39985 -81.39991,-81.39985 z"})]}),Test:new Shape({width:512,height:512,path:"M 256.00001,0 335.10835,168.53994 512,195.5666 384.00002,326.75665 414.2167,512 256,424.53995 97.783292,511.99996 127.99999,326.75665 1.4633393e-6,195.56658 176.89164,168.53994 Z"})};
		</script>
	</head>
	<body>
		<script>SHISHO.init();</script>
	</body>
</html>
